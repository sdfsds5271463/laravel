<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>JavaScript相關程式頁面</title>
        <!--<script src="inc.js"></script> 直接引用js的語法-->
        <script> //此段就是js效果測試
            //在網頁中，整個瀏覽器顯叫window，裡面的顯示區塊叫做document
            //默認呼叫參數是window，因此「window.」可省略，document不行
            
            //window參數
                //innerHeight; innerWidth; //回傳當前視窗寬高
                //alert("彈跳對話");
                //open('http://www.google.com','_blank'); //彈出網頁
                //close(); //關閉open的視窗
                //location="http://www.google.com"; 轉跳網頁
                timer = setInterval(function(){alert("每兩秒彈出一次");},2000);//每2秒都執行一次function內js語法
                timer2 = setTimeout(function(){alert("網頁開5秒了");},5000);// 經過500秒後執行一次function內js語法
                clearInterval(timer); //clear Interval
                clearTimeout(timer2); //clear Timeout
                    //上面參數的function(){}為匿名函式，在執行函式的地方直接執行程式碼的方法。
            
            //document參數
                //直接產生html語法 (JS內html語法過長時，空行尾端要加入\n\)
                document.writeln("<pre>下面寫了測試按鈕ln</pre>"); //<pre>頁籤可以讓html顯示ln
                document.write('<form name="form1" onsubmit="return false;">\n\
                                <button id="button1">button12</button>\n\
                                <input id="text1" type="text" value="123">\n\
                                <ul id="ul1"></ul></form>');  //form只要onsubmit時回傳false就不會把表單送出

            //陣列相關
                var ArrTest = new Array(); //陣列定義法
                    ArrTest.push(456); //尾端插入參數
                    ArrTest['A1'] = "123"; //組和陣列 (鍵值陣列)
                    delete ArrTest['A1']; //刪除鍵
                var ArrTest2 = ["A", "B", "C"];
                var ArrTest3 = new Array("A", "B", "C"); //一般陣列
                ArrTest3.length; //回傳陣列總數
                //陣列拆解
                for (key in ArrTest2){ console.log(key); };  //拆解鍵法
                ArrTest2.forEach(function(value,index){ console.log(value); }); //拆解值
                //陣列元素處理slice
                var temp = ["Hello", "Welcome", "to", "PJCHENder"];
                temp.slice(1, 3); //從第一個元素開始，連續保留2(3-1)個元素  回傳['Welcome', 'to']
                temp.slice(1); //從第一個元素保存到最後 ["Welcome", "to", "PJCHENder"]
                temp.slice(0,-2);//刪除陣列中最後2個元素  回傳['Hello', 'Welcome']
                /*concat()  傳回一個由兩個或兩個以上陣列並排而成的新陣列
                join()  傳回一個字串值，它是由陣列中的所有元素串連在一起所組成，並且用特定的分隔字元來分隔
                pop()   移除陣列的最後一個元素，並將它傳回
                push()  附加新元素到陣列尾部，並傳回陣列的新長度
                reverse()   傳回一個元素位置反轉的陣列
                shift() 移除陣列的第一個元素，並將它傳回
                slice() 傳回陣列的一個區段
                splice()    移除陣列中的元素，並依需要在原位插入新元素，然後傳回被刪除的元素
                sort()  傳回一個元素已排序過的陣列
                toString()  傳回一個物件（或陣列）的字串表示法
                unshift()   在陣列開始處插入指定的元素，並傳回此陣列*/


            //除錯模式Log輸入資訊
                console.log("Chrome右鍵>檢查>Consolo 會找到此資訊");
                
                //以下是DOM (Document object modle)文件元素模型 (回傳的值通常以陣列表示)
                console.log("以下列出子節點範例(ln也是子節點)");
                console.log(document.firstChild); //第一個子節點
                console.log(document.lastChild); //最後一個子節點
                console.log(document.childNodes); //所有子節點
                console.log(document.body.firstChild); //body.第一個子節點
                console.log("以下列出元素節點範例");
                console.log(document.firstElementChild); //第一個元素節點
                console.log(document.lastElementChild); //最後一個元素節點
                console.log(document.children); //所有元素節點
                console.log(document.children.length); //元素節點數量(最外層)
                
                //選擇元素的方式DOM
                var button1,text1,ul1 //產生元素
                button1 = document.getElementById("button1"); //依據id指定元素
                ul1 = document.getElementById("ul1");
                    //.getElementsByClassName //依據類別
                    //.getElementsByName //依據元素名稱
                    //.getElementsByTagName //依據標籤名稱
                    //.querySelectorAll('.aa'); //依據敘述選擇 超好用我的媽
                    //注意：除了id具有獨特性不可重複，其他的指定方法都會以陣列方式回傳
                    //尋找元素時，只能找到本段程式碼上方的元素，或者給元素onlcick的參數呼叫函式
                //Form專用的選擇元素方式： (雙引號內的索引值可以是name或是id其中一樣符合即可)
                text1 = document.forms["form1"].elements["text1"];
                
                //一般Html呼叫JavaScript都在帶有on的參數後面 (Ex onclick onmousedown onchange)
                button1.onclick = test_func; //按鈕呼叫函數方法 1
                //button1.addEventListener('click',test_func); //按鈕呼叫函數方法 2
                function test_func()
                {
                    button1.innerHTML = "hahaha"; //元素內容改變方法
                        //innerHTML(內容)、outerHTML(整個元素) ((innerText、outerText不是W3C不在此說明))
                    text1.value = 'hohoho'; //元素屬性改變法 1
                        //唯讀的物件寬高屬性 offsetHeight  offsetWeight
                        //設定物件寬高如 .style.width = 123 + 'px'
                    text1.style.border = 'solid 5px #FF00FF'; //元素屬性改變法 1 css
                    text1.setAttribute('value','hohoho'); //元素屬性改變法 2
                    ul1.appendChild(document.createElement("li")); //增加子元素的方法
                    
                    ul1.classList.add("newClass"); //控制class屬性
                        //等於 .className += ' newClass';
                    ul1.classList.remove("newClass"); 
                };

            //其他處理函數
                //資料型態判別 (從前面開始回傳數字，若無數字則回傳NaN)
                console.log(parseInt("123.45aaaa"));   //回傳123
                console.log(parseFloat("123.45wwww")); //回傳123.45
                console.log(isNaN("NaN")); //回傳true
                console.log(1/0); //回傳Infinity (無限大)
                
                //時間物件
                var D = new Date(); //可帶參數，直接定義時間旗標的毫秒
                console.log(D); //Mon Aug 29 2016 21:25:35 GMT+0800 (台北標準時間)
                console.log(D.toLocaleTimeString()); //下午9:26:30 依據地區不同
                    /*Date()	返回當日的日期和時間，可以建立時間物件，時間物件有以下子函數可用
                     *          括弧內可設定時間參數，抓取當天時間參數
                        .getDate()	從 Date 對象返回一个月中的某一天 (1 ~ 31)。
                        .getDay()	從 Date 對象返回一周中的某一天 (0 ~ 6)。
                        .getMonth()	從 Date 對象返回月份 (0 ~ 11)。
                        .getFullYear()	從 Date 對象以四位數字返回年份。
                        .getYear()	請使用 getFullYear() 方法代替。
                        .getHours()	返回 Date 對象的小時 (0 ~ 23)。
                        .getMinutes()	返回 Date 對象的分鐘 (0 ~ 59)。
                        .getSeconds()	返回 Date 對象的秒數 (0 ~ 59)。
                        .getMilliseconds()	返回 Date 對象的毫秒(0 ~ 999)。
                        .getTime()	返回 1970 年 1 月 1 日至今的毫秒數。*/
                
                //字串處理
                    //1.英文大小寫轉換
                    var TeMp = 'TeMp';
                    TeMp.toUpperCase(); //轉大寫，回傳TEMP
                    TeMp.toLowerCase(); //轉小寫，回傳temp
                    
                    //2.字元尋找indexOf
                    var temp = "Welcome to PJCHENder";
                    temp.indexOf('to'); //回傳第一個字元index，沒找到字串回傳-1  回傳8
                    
                    //3.字串處理substring
                    temp.substring(1,3); //從第1個字元開始，連續保留2(3-1)個字元  回傳"el"
                    temp.substring(2); //從第2個字元開始，保留到最後  回傳"lcome to PJCHENder"

                    temp = temp.match(/(^\s*)/g); //判斷正規則，回傳陣列的吻和規則 (每個括號一個元素)
                    temp = temp.replace(/(^\s*)/g, "").replace(/(\s*$)/g, ""); //去除左右空白
                    temp = temp.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;"); //敏感字元替換
                        //正規則表示 說明：
                        /*  規則需用兩個/包住
                         *      一般字元：直接比對
                         *      \s：空白字元(全|半形空白)
                         *      .：任意字元
                         *      ^：(頭)從最左側開始判斷
                         *      $：(尾)從最右側開始判斷
                         *      ^str$：左右完全吻合
                         *      *：([]尾)連續判斷、(str尾)連續字元|串
                         *      []：內含特殊規則
                         *          [a-z] 一個小寫英文字元 ([!-~]為所有一般字元)
                         *          [^a]* 從左側開始連續擷取至a之前(不包含a)
                         *      {}：(尾)重複前述規則|字元|串
                         *          {2}重複2次、{1,3}重複1~3次、{1,}重複1次以上
                         *      +：(尾)等同於{1,}重複1次以上
                         *      ?：(尾)將前述規則變為非強制
                         *      \：(頭)跳脫字元
                         *  規則尾端：
                         *      加i：不考慮英文大小寫
                         *      加g：整個規則連續判斷
                         *
                         *  EX: "/#[0-Z]{6}/i" 規則為 不分大小寫的色碼格式，例如#12FA8e
                         *  EX: "/data:([^;]*)/" 會先找出data:字串，然後從左側^連續*找至字元;
                         *      data:1234567;wsdfsdf   抓取data:1234567
                         */ 

                    //4.格式轉換
                    temp = temp.toString(); //轉成字串

                //數學計算
                    //高等計算屬性
                    Math.E; //回傳自然數e (約為2.718)
                    Math.PI; //回傳拍
                    Math.sin(3.14159); //回傳正弦函數(值)
                    Math.asin(1); //回傳餘弦函數(角度)
                    Math.exp(2); //回傳e的指數
                    Math.log(2); //回傳自然對數
                    //普通數學
                    /*Math
                        .abs(x); //絕對值
                        .pow(x,y); //次方x^y
                        .ceil(x) .round(x) .floor(x) //無條件進入 四捨五入 無條件捨去
                        .max(x,x,x) .min(x,x,x) //極值
                        .random() //0~1的亂數*/

                //瀏覽器版本特區
                    var isIE = navigator.userAgent.search("MSIE") > -1;
                    var isIE7 = navigator.userAgent.search("MSIE 7") > -1;
                    var isFirefox = navigator.userAgent.search("Firefox") > -1;
                    var isOpera = navigator.userAgent.search("Opera") > -1;
                    var isSafari = navigator.userAgent.search("Safari") > -1;//Google瀏覽器是用這核心
                    if (isIE7) {/*alert('isIE7');*/}
                    if (isIE) {/*alert('isIE');*/}
                    if (isFirefox) {/*alert('isFirefox');*/}
                    if (isOpera) {/*alert('isOpera');*/}
                    if (isSafari) {/*alert('isSafari or Chrome');*/}

                //瀏覽器window關閉前事件
                    window.onbeforeunload = function () { console.log("關閉中"); }

                //讓IE6 7 8看懂Html5標籤
                    var tag = ['section', 'article', 'nav', 'header', 'footer', 'aside', 'main'];
                    for (key in tag) {
                        document.createElement(tag[key]);
                    }

        </script>
    </head>
    <body>
        <noscript>不支援JavaScript時顯示這標籤的文字</noscript>
        <!--一般JavaScript語法都寫在head，其他的放在body-->
    </body>
    
</html>